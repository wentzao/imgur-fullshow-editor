<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊñáËóªÁæéË™ûÂÖ¨ÂëäÁ∑®ËºØÂô®</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Sortable.js -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>

    <!-- LZ-String -->
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>

    <!-- Ëá™Ë®ÇÊ®£Âºè -->
    <link rel="stylesheet" href="css/editor.css">
</head>

<body>
    <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüü -->
    <div class="row" style="height: 100vh; margin: 0;">
        <!-- Á∑®ËºØÂô®ÂçÄÂüü -->
        <div class="col-lg-4 col-12 editor-sidebar">
            <!-- È†ÇÈÉ®Ê®ôÈ°å -->
            <div class="editor-header">
                <h1 class="editor-title">
                    <div class="editor-title-icon"><i class="fas fa-newspaper"></i></div>
                    ÊñáËóªÁæéË™ûÂÖ¨ÂëäÁ∑®ËºØÂô®
                </h1>
                <button class="header-btn" data-bs-toggle="modal" data-bs-target="#decodeModal">
                    <i class="fas fa-folder-open"></i> ËºâÂÖ•
                </button>
            </div>

            <!-- Á∑®ËºØÂô®ÂÖßÂÆπ -->
            <div class="editor-content">
                <!-- üìù Âü∫Êú¨Ë≥áË®äÂç°Áâá -->
                <div class="editor-card">
                    <div class="card-header active" onclick="toggleCard(this)">
                        <h3 class="card-title"><span class="card-icon">üìù</span> Âü∫Êú¨Ë≥áË®ä</h3>
                        <i class="fas fa-chevron-down card-toggle"></i>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-12 mb-3">
                                <label for="title" class="form-label">ÂÖ¨ÂëäÊ®ôÈ°å</label>
                                <input type="text" class="form-control" id="title" placeholder="Ëº∏ÂÖ•Ê®ôÈ°å...">
                            </div>
                            <div class="col-6">
                                <label for="date" class="form-label">Êó•Êúü</label>
                                <input type="date" class="form-control" id="date" value="">
                            </div>
                            <div class="col-6">
                                <label for="imageCount" class="form-label">Ê°åÊ©üÊéíÂàó</label>
                                <select class="form-control" id="imageCount">
                                    <option value="1">1 Ê¨Ñ</option>
                                    <option value="2">2 Ê¨Ñ</option>
                                    <option value="3" selected>3 Ê¨Ñ</option>
                                    <option value="4">4 Ê¨Ñ</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <label for="primaryColor" class="form-label">‰∏ªÈ°èËâ≤</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="primaryColor" placeholder="#02a568"
                                        value="#02a568">
                                    <div id="primaryColorPreview" class="color-preview"
                                        style="background-color: #02a568;">
                                        <input type="color" class="color-input-hidden" id="primaryColorPicker"
                                            value="#02a568">
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <label for="secondaryColor" class="form-label">ÂâØÈ°èËâ≤</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="secondaryColor" placeholder="#e6f7f0"
                                        value="#e6f7f0">
                                    <div id="secondaryColorPreview" class="color-preview"
                                        style="background-color: #e6f7f0;">
                                        <input type="color" class="color-input-hidden" id="secondaryColorPicker"
                                            value="#e6f7f0">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üì∑ ÂúñÁâáÁÆ°ÁêÜÂç°Áâá -->
                <div class="editor-card">
                    <div class="card-header active" onclick="toggleCard(this)">
                        <h3 class="card-title"><span class="card-icon">üì∑</span> ÂúñÁâáÁÆ°ÁêÜ</h3>
                        <i class="fas fa-chevron-down card-toggle"></i>
                    </div>
                    <div class="card-body">
                        <!-- ÊãñÊîæ‰∏äÂÇ≥ÂçÄ -->
                        <div class="upload-zone" onclick="document.getElementById('upload').click()" id="uploadZone">
                            <div class="upload-zone-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                            <div class="upload-zone-text">ÊãñÊîæÂúñÁâáÂà∞Ê≠§ËôïÔºåÊàñÈªûÊìä‰∏äÂÇ≥</div>
                            <div class="upload-zone-hint">ÊîØÊè¥ JPG, PNG, GIF, WebP Ê†ºÂºè</div>
                        </div>
                        <input type="file" id="upload" accept="image/*" multiple style="display: none;">

                        <!-- Á∂≤ÂùÄËº∏ÂÖ• -->
                        <div class="mt-3">
                            <div class="input-group">
                                <input type="url" class="form-control" id="imageUrl" placeholder="ÊàñË≤º‰∏äÂúñÁâáÁ∂≤ÂùÄ...">
                                <button type="button" class="btn btn-primary" onclick="addImageFromUrl()"
                                    style="border-radius: 0 8px 8px 0; background: var(--primary); border-color: var(--primary);">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>

                        <!-- ÂúñÁâáÂàóË°® -->
                        <div id="imageList" class="image-list"></div>
                    </div>
                </div>

                <!-- ‚öôÔ∏è È°ØÁ§∫ÈÅ∏È†ÖÂç°Áâá -->
                <div class="editor-card">
                    <div class="card-header active" onclick="toggleCard(this)">
                        <h3 class="card-title"><span class="card-icon">‚öôÔ∏è</span> È°ØÁ§∫ÈÅ∏È†Ö</h3>
                        <i class="fas fa-chevron-down card-toggle"></i>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="showTitle" checked>
                                    <label class="form-check-label" for="showTitle">È°ØÁ§∫Ê®ôÈ°å</label>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="showFooter" checked>
                                    <label class="form-check-label" for="showFooter">È°ØÁ§∫ Footer</label>
                                </div>
                            </div>
                            <div class="col-12 mt-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="imageRounded" checked>
                                    <label class="form-check-label" for="imageRounded">ÂúñÁâáÂúìËßí</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üìê ÈÄ≤ÈöéË®≠ÂÆöÂç°ÁâáÔºàÈ†êË®≠Êî∂ÂêàÔºâ -->
                <div class="editor-card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <h3 class="card-title"><span class="card-icon">üìê</span> ÈÄ≤ÈöéË®≠ÂÆö</h3>
                        <i class="fas fa-chevron-down card-toggle collapsed"></i>
                    </div>
                    <div class="card-body collapsed">
                        <!-- Ëû¢ÂπïÈÇäÁïå -->
                        <div class="mb-4">
                            <label class="form-label" style="font-weight: 600; color: var(--text-primary);">Ëû¢ÂπïÈÇäÁïå</label>
                            <div class="range-group mb-2">
                                <span class="form-label" style="min-width: 60px;">‰∏ä‰∏ã</span>
                                <input type="range" class="range-slider" id="screenPaddingVertical" min="0" max="100"
                                    value="10">
                                <span class="range-value"><span id="screenPaddingVerticalValue">10</span>px</span>
                            </div>
                            <div class="range-group">
                                <span class="form-label" style="min-width: 60px;">Â∑¶Âè≥</span>
                                <input type="range" class="range-slider" id="screenPaddingHorizontal" min="0" max="100"
                                    value="10">
                                <span class="range-value"><span id="screenPaddingHorizontalValue">10</span>px</span>
                            </div>
                        </div>

                        <!-- ÂúñÁâáÈñìË∑ù -->
                        <div class="mb-4">
                            <label class="form-label" style="font-weight: 600; color: var(--text-primary);">ÂúñÁâáÈñìË∑ù</label>
                            <div class="range-group mb-2">
                                <span class="form-label" style="min-width: 60px;">‰∏ä‰∏ã</span>
                                <input type="range" class="range-slider" id="imageGapVertical" min="0" max="50"
                                    value="10">
                                <span class="range-value"><span id="imageGapVerticalValue">10</span>px</span>
                            </div>
                            <div class="range-group">
                                <span class="form-label" style="min-width: 60px;">Â∑¶Âè≥</span>
                                <input type="range" class="range-slider" id="imageGapHorizontal" min="0" max="50"
                                    value="10">
                                <span class="range-value"><span id="imageGapHorizontalValue">10</span>px</span>
                            </div>
                        </div>

                        <!-- ËÉåÊôØË®≠ÂÆö -->
                        <div>
                            <label class="form-label" style="font-weight: 600; color: var(--text-primary);">ËÉåÊôØÊ®£Âºè</label>
                            <div class="btn-group-custom mb-3">
                                <input type="radio" name="bgType" id="bgDots" value="dots" checked
                                    style="display: none;">
                                <label class="btn-option active" for="bgDots" onclick="selectBgType('dots')">ÈªûÈªû</label>

                                <input type="radio" name="bgType" id="bgColor" value="color" style="display: none;">
                                <label class="btn-option" for="bgColor" onclick="selectBgType('color')">Á¥îËâ≤</label>

                                <input type="radio" name="bgType" id="bgImage" value="image" style="display: none;">
                                <label class="btn-option" for="bgImage" onclick="selectBgType('image')">ÂúñÁâá</label>
                            </div>

                            <!-- Á¥îËâ≤ÈÅ∏ÊìáÂô® -->
                            <div id="bgColorPicker" style="display:none;">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="bgColorValue" placeholder="#FFFFFF">
                                    <div id="bgColorPreview" class="color-preview" style="background-color: #FFFFFF;">
                                    </div>
                                </div>
                            </div>

                            <!-- ËÉåÊôØÂúñÁâá -->
                            <div id="bgImageUpload" style="display:none;">
                                <input type="file" class="form-control mb-2" id="bgImageFile" accept="image/*">
                                <input type="url" class="form-control" id="bgImageUrl" placeholder="ÊàñË≤º‰∏äÂúñÁâáÁ∂≤ÂùÄ">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂåØÂá∫ÊåâÈàïÂçÄ -->
            <div class="export-section">
                <div class="export-buttons">
                    <button class="btn-export btn-export-primary" onclick="copyToClipboard()">
                        <i class="fas fa-globe"></i> Ë§áË£ΩÁ∂≤ÂùÄ
                    </button>
                    <button class="btn-export btn-export-secondary" onclick="copyToClipboard2()">
                        <i class="fab fa-line"></i> LINE
                    </button>
                </div>
            </div>

            <!-- Èö±ËóèÁöÑ URL Ëº∏ÂÖ•Ê°Ü -->
            <div class="url-display-hidden">
                <input type="text" id="url" readonly>
                <input type="text" id="lineurl" readonly>
            </div>
        </div>

        <!-- È†êË¶ΩÂçÄÂüü -->
        <div class="col-lg-8 col-12 preview-area">
            <div class="preview-controls">
                <button class="preview-control-btn active" onclick="setPreviewScale('1', this)" title="ÊâãÊ©ü">
                    <i class="fas fa-mobile-alt"></i>
                </button>
                <button class="preview-control-btn" onclick="setPreviewScale('0.75', this)" title="Âπ≥Êùø">
                    <i class="fas fa-tablet-alt"></i>
                </button>
                <button class="preview-control-btn" onclick="setPreviewScale('0.5', this)" title="Ê°åÊ©ü">
                    <i class="fas fa-desktop"></i>
                </button>
            </div>
            <select class="form-control" id="scale" style="display: none;">
                <option value="0.5">Ê°åÊ©ü</option>
                <option value="0.75">Âπ≥Êùø</option>
                <option value="1" selected>ÊâãÊ©ü</option>
            </select>
            <div id="previewSection">
                <div class="preview-container" id="previewContainer">
                    <div class="device-simulator mobile" id="deviceSimulator">
                        <div class="device-label" id="deviceLabel">iPhone 14 Pro (390√ó844)</div>
                        <div class="device-screen mobile" id="deviceScreen">
                            <iframe id="previewIframe"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ëß£Á¢º Modal -->
    <div class="modal fade" id="decodeModal" tabindex="-1" aria-labelledby="decodeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="decodeModalLabel">ËºâÂÖ•ÁèæÊúâÂÖ¨Âëä</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <label class="form-label">Ë≤º‰∏äÂÖ¨ÂëäÈÄ£Áµê</label>
                    <input type="text" id="decodedUrlInput" class="form-control"
                        placeholder="https://news.wentzao.com/?data=...">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" onclick="decodeAndApplyData()"
                        style="background: var(--primary); border-color: var(--primary);">ËºâÂÖ•</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ëá™Ë®ÇËÖ≥Êú¨ -->
    <script src="js/editor.js"></script>
</body>

</html>